<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Latihan UAS - Sistem Basis Data</title>
    <!-- Memuat Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Google (Inter) -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: "Inter", sans-serif;
        background-color: #0f172a; /* bg-slate-900 */
      }
      .screen,
      .modal-overlay {
        display: none;
        animation: fadeIn 0.4s ease-out;
      }
      .screen.active,
      .modal-overlay.active {
        display: flex;
      }
      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: scale(0.98) translateY(10px);
        }
        to {
          opacity: 1;
          transform: scale(1) translateY(0);
        }
      }
      .modal-content {
        animation: slideUp 0.3s ease-out;
      }
      @keyframes slideUp {
        from {
          transform: translateY(20px);
          opacity: 0;
        }
        to {
          transform: translateY(0);
          opacity: 1;
        }
      }
      .review-container::-webkit-scrollbar {
        width: 8px;
      }
      .review-container::-webkit-scrollbar-track {
        background: #1e293b;
      }
      .review-container::-webkit-scrollbar-thumb {
        background: #38bdf8;
        border-radius: 4px;
      }
      @media (max-width: 768px) {
        footer {
          position: static !important;
          margin-top: 2rem;
        }
      }
      .packet-button,
      #start-button,
      #review-button,
      #restart-button,
      #next-button,
      #back-to-result-button {
        box-shadow: 0 2px 8px 0 rgba(56, 189, 248, 0.1);
        transition: box-shadow 0.2s;
      }
      .packet-button:hover,
      #start-button:hover,
      #review-button:hover,
      #restart-button:hover,
      #next-button:hover,
      #back-to-result-button:hover {
        box-shadow: 0 4px 16px 0 rgba(56, 189, 248, 0.18);
      }
      .options-container button:active {
        transform: scale(0.98);
      }
      @media (max-width: 768px) {
        .bg-slate-800 {
          box-shadow: 0 2px 16px 0 rgba(30, 41, 59, 0.18);
        }
      }
      #quiz-back-button:disabled {
        opacity: 0.5;
        cursor: not-allowed;
      }
    </style>
  </head>
  <body class="text-white">
    <!-- Kontainer Utama Aplikasi -->
    <div
      id="app-container"
      class="min-h-screen flex flex-col items-center justify-center p-4"
    >
      <!-- 1. Layar Awal (Start Screen) -->
      <div id="start-screen" class="screen active w-full">
        <div
          class="text-center bg-slate-800 p-8 rounded-2xl shadow-2xl max-w-2xl w-full border border-slate-700 mx-auto"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            viewBox="0 0 24 24"
            stroke-width="1.5"
            stroke="currentColor"
            class="w-16 h-16 mx-auto text-sky-400 mb-4"
          >
            <ellipse cx="12" cy="6" rx="8" ry="3" />
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              d="M4 6v6c0 1.657 3.582 3 8 3s8-1.343 8-3V6"
            />
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              d="M4 12v6c0 1.657 3.582 3 8 3s8-1.343 8-3v-6"
            />
          </svg>
          <h1 class="text-4xl md:text-5xl font-bold mb-2">Latihan UAS</h1>
          <p class="text-2xl text-slate-300 mb-6">Konsep Basis Data</p>
          <p class="text-slate-400 mb-8">
            Uji pemahaman Anda dengan soal-soal pilihan ganda yang dibagi per
            paket.
          </p>
          <button
            id="start-button"
            class="bg-sky-500 hover:bg-sky-600 text-white font-bold py-3 px-8 rounded-lg text-xl transition-all duration-300 transform hover:scale-105 shadow-lg"
          >
            Mulai
          </button>
        </div>
      </div>

      <!-- 2. Layar Pemilihan Paket Soal -->
      <div id="packet-selection-screen" class="screen w-full">
        <div
          class="text-center bg-slate-800 p-8 rounded-2xl shadow-2xl max-w-3xl w-full border border-slate-700 mx-auto"
        >
          <h2 class="text-3xl font-bold mb-8">Pilih Mode Latihan</h2>
          <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
            <button
              data-packet="1"
              class="packet-button bg-gradient-to-br from-teal-500 to-cyan-600 hover:from-teal-600 hover:to-cyan-700 text-white font-bold py-6 px-4 rounded-lg text-lg transition-all duration-300 transform hover:-translate-y-1 shadow-lg"
            >
              Paket 1 <span class="block text-sm font-normal">(Soal 1-50)</span>
            </button>
            <button
              data-packet="2"
              class="packet-button bg-gradient-to-br from-indigo-500 to-purple-600 hover:from-indigo-600 hover:to-purple-700 text-white font-bold py-6 px-4 rounded-lg text-lg transition-all duration-300 transform hover:-translate-y-1 shadow-lg"
            >
              Paket 2
              <span class="block text-sm font-normal">(Soal 51-100)</span>
            </button>
            <button
              data-packet="all"
              class="packet-button bg-gradient-to-br from-rose-500 to-red-600 hover:from-rose-600 hover:to-red-700 text-white font-bold py-6 px-4 rounded-lg text-lg transition-all duration-300 transform hover:-translate-y-1 shadow-lg"
            >
              Acak Semua Soal
              <span class="block text-sm font-normal">(100 Soal)</span>
            </button>
          </div>
          <button
            id="back-to-start-button"
            class="mt-8 text-sky-400 hover:text-sky-300 transition-colors"
          >
            ‹ Kembali ke Menu Utama
          </button>
        </div>
      </div>

      <!-- 3. Layar Kuis (Quiz Screen) -->
      <div id="quiz-screen" class="screen w-full">
        <div
          class="bg-slate-800 p-6 md:p-8 rounded-2xl shadow-2xl max-w-3xl w-full border border-slate-700 mx-auto"
        >
          <div class="flex justify-between items-center mb-6">
            <button
              id="quiz-back-button"
              class="text-sky-400 hover:text-sky-300 font-semibold flex items-center gap-1 transition-colors"
              type="button"
            >
              <!-- Icon panah kiri -->
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="h-6 w-6 inline"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M15 19l-7-7 7-7"
                />
              </svg>
              Kembali
            </button>
            <p id="question-counter" class="text-sky-400 font-semibold"></p>
            <div
              id="timer"
              class="bg-slate-700 text-lg font-bold text-yellow-400 px-4 py-1 rounded-md"
            >
              00:00
            </div>
          </div>
          <div class="w-full bg-slate-700 rounded-full h-3 mb-6">
            <div
              id="progress-bar"
              class="bg-sky-500 h-3 rounded-full transition-all duration-300"
              style="width: 0%"
            ></div>
          </div>
          <h2
            id="question-text"
            class="text-xl md:text-2xl font-medium mb-6 leading-relaxed"
          ></h2>
          <div
            id="options-container"
            class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-8"
          ></div>
          <div class="text-right">
            <button
              id="next-button"
              disabled
              class="bg-sky-500 text-white font-bold py-3 px-10 rounded-lg text-lg transition-all duration-300 disabled:bg-slate-600 disabled:cursor-not-allowed disabled:text-slate-400 hover:bg-sky-600"
            >
              Selanjutnya
            </button>
          </div>
        </div>
      </div>

      <!-- 4. Layar Hasil (Result Screen) -->
      <div id="result-screen" class="screen w-full">
        <div
          class="text-center bg-slate-800 p-8 rounded-2xl shadow-2xl max-w-2xl w-full border border-slate-700 mx-auto"
        >
          <h2 class="text-3xl font-bold mb-4">Hasil Latihan Selesai!</h2>
          <div
            id="feedback-container"
            class="flex items-center justify-center gap-2 text-2xl font-bold mb-4"
          ></div>
          <p id="score-text" class="text-xl text-slate-300 mb-2"></p>
          <div class="w-full bg-slate-700 rounded-full h-8 my-6">
            <div
              id="score-bar"
              class="bg-sky-500 h-8 rounded-full flex items-center justify-center text-sm font-medium"
              style="width: 0%"
            >
              0%
            </div>
          </div>
          <div class="flex flex-col md:flex-row gap-4 justify-center">
            <button
              id="review-button"
              class="bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-8 rounded-lg text-xl transition-all duration-300 transform hover:scale-105 shadow-lg"
            >
              Lihat Pembahasan
            </button>
            <button
              id="restart-button"
              class="bg-sky-500 hover:bg-sky-600 text-white font-bold py-3 px-8 rounded-lg text-xl transition-all duration-300 transform hover:scale-105 shadow-lg"
            >
              Coba Lagi
            </button>
          </div>
        </div>
      </div>

      <!-- 5. Layar Pembahasan (Review Screen) -->
      <div id="review-screen" class="screen w-full">
        <div
          class="bg-slate-800 p-6 md:p-8 rounded-2xl shadow-2xl max-w-4xl w-full border border-slate-700 mx-auto flex flex-col"
          style="height: 90vh"
        >
          <h2 class="text-3xl font-bold mb-6 text-center">Pembahasan Soal</h2>
          <div
            id="review-container"
            class="review-container flex-grow overflow-y-auto pr-4 space-y-6"
          ></div>
          <div class="text-center mt-6">
            <button
              id="back-to-result-button"
              class="bg-sky-500 hover:bg-sky-600 text-white font-bold py-3 px-8 rounded-lg text-xl transition-all duration-300 transform hover:scale-105 shadow-lg"
            >
              Kembali ke Hasil
            </button>
          </div>
        </div>
      </div>

      <!-- Modal Konfirmasi -->
      <div
        id="confirmation-modal"
        class="modal-overlay fixed inset-0 bg-black bg-opacity-70 items-center justify-center"
      >
        <div
          class="modal-content bg-slate-800 p-8 rounded-2xl shadow-2xl max-w-sm w-full border border-slate-700 text-center"
        >
          <h3 id="modal-title" class="text-2xl font-bold mb-4"></h3>
          <p id="modal-text" class="text-slate-300 mb-6"></p>
          <div class="flex gap-4 justify-center">
            <button
              id="modal-cancel-button"
              class="bg-slate-600 hover:bg-slate-700 text-white font-bold py-2 px-6 rounded-lg transition-colors"
            >
              Batal
            </button>
            <button
              id="modal-confirm-button"
              class="bg-sky-500 hover:bg-sky-600 text-white font-bold py-2 px-6 rounded-lg transition-colors"
            >
              Ya, Mulai
            </button>
          </div>
        </div>
      </div>

      <footer class="text-center mt-8 text-slate-500 text-sm absolute bottom-4">
        <p>Dibuat Oleh Darell Rangga.</p>
      </footer>
    </div>

    <script>
      // --- Data Soal dalam Format JSON ---
      const quizQuestions = [
        // Soal 1-50
        {
          id: 1,
          question:
            "Dalam bahasa Query Formal, terdapat dua dasar pembentukan bahasa, yaitu Aljabar Relasional dan...",
          options: [
            "Kalkulus Prosedural",
            "Kalkulus Relasional",
            "Aljabar Proposisional",
            "Kalkulus Logika",
          ],
          answer: "Kalkulus Relasional",
        },
        {
          id: 2,
          question:
            "Bahasa query yang didasarkan pada Aljabar Relasional merupakan bahasa query yang bersifat...",
          options: ["Non-Prosedural", "Prosedural", "Deklaratif", "Fungsional"],
          answer: "Prosedural",
        },
        {
          id: 3,
          question:
            "Operator Aljabar Relasional yang digunakan untuk pemilihan tupel atau record adalah...",
          options: ["Project (π)", "Join (⋈)", "Restrict (σ)", "Divide (÷)"],
          answer: "Restrict (σ)",
        },
        {
          id: 4,
          question:
            "Operator Project (π) dalam Aljabar Relasional berfungsi untuk...",
          options: [
            "Memilih tupel atau record",
            "Menggabungkan tabel",
            "Memilih atribut atau field",
            "Membagi relasi",
          ],
          answer: "Memilih atribut atau field",
        },
        {
          id: 5,
          question:
            "Perintah SQL `CREATE TABLE`, `ALTER TABLE`, dan `DROP TABLE` termasuk dalam sub-bahasa...",
          options: [
            "Data Manipulation Language (DML)",
            "Data Control Language (DCL)",
            "Transaction Control Language (TCL)",
            "Data Definition Language (DDL)",
          ],
          answer: "Data Definition Language (DDL)",
        },
        {
          id: 6,
          question:
            "Sintaks SQL yang digunakan untuk menambahkan record baru ke dalam sebuah tabel adalah...",
          options: ["UPDATE", "SELECT", "INSERT", "ADD"],
          answer: "INSERT",
        },
        {
          id: 7,
          question:
            "Untuk mengubah nilai atribut pada suatu record dari sebuah tabel, digunakan perintah...",
          options: ["CHANGE", "MODIFY", "INSERT", "UPDATE"],
          answer: "UPDATE",
        },
        {
          id: 8,
          question:
            "Operator Aljabar Relasional `Cartesian product (X)` digunakan untuk...",
          options: [
            "Menyeleksi tupel-tupel yang memenuhi syarat",
            "Menghasilkan gabungan tabel dengan atribut yang sama",
            "Menghasilkan tabel hasil perkalian kartesian dari dua relasi",
            "Mendapatkan irisan dari dua tabel",
          ],
          answer:
            "Menghasilkan tabel hasil perkalian kartesian dari dua relasi",
        },
        {
          id: 9,
          question:
            "Dalam SQL, jenis JOIN yang hanya menggabungkan baris data dari dua tabel yang datanya bersesuaian (memiliki nilai kunci yang sama) adalah...",
          options: ["LEFT JOIN", "RIGHT JOIN", "FULL OUTER JOIN", "INNER JOIN"],
          answer: "INNER JOIN",
        },
        {
          id: 10,
          question:
            "Jika Anda ingin menampilkan semua data dari tabel kiri dan data yang bersesuaian dari tabel kanan, jenis JOIN yang digunakan adalah...",
          options: ["INNER JOIN", "LEFT JOIN", "RIGHT JOIN", "CROSS JOIN"],
          answer: "LEFT JOIN",
        },
        {
          id: 11,
          question: "Fungsi agregat `COUNT` dalam SQL digunakan untuk...",
          options: [
            "Menghitung total nilai dari sebuah kolom numerik",
            "Menghitung jumlah record/baris",
            "Menghitung nilai rata-rata",
            "Mencari nilai terkecil",
          ],
          answer: "Menghitung jumlah record/baris",
        },
        {
          id: 12,
          question:
            "Untuk menghitung total dari kolom yang mempunyai tipe data numerik, digunakan fungsi agregat...",
          options: ["AVG", "MAX", "SUM", "COUNT"],
          answer: "SUM",
        },
        {
          id: 13,
          question:
            "Sebuah `SELECT` statement yang berada di dalam klausa `WHERE` atau `HAVING` dari pernyataan `SELECT` luar disebut...",
          options: ["JOIN", "UNION", "Subquery", "View"],
          answer: "Subquery",
        },
        {
          id: 14,
          question:
            "Basis data terdistribusi didefinisikan sebagai kumpulan data yang digunakan bersama, saling terhubung secara logik, tetapi...",
          options: [
            "Tersebar secara fisik pada suatu jaringan komputer",
            "Tersimpan dalam satu komputer pusat",
            "Memiliki skema yang berbeda di setiap lokasi",
            "Tidak dapat diakses secara bersamaan",
          ],
          answer: "Tersebar secara fisik pada suatu jaringan komputer",
        },
        {
          id: 15,
          question:
            "Salah satu keuntungan dari basis data terdistribusi adalah...",
          options: [
            "Kompleksitas yang rendah",
            "Harga software yang murah",
            "Adanya otonomi lokal",
            "Keamanan data yang lebih terjamin",
          ],
          answer: "Adanya otonomi lokal",
        },
        {
          id: 16,
          question:
            "Manakah yang merupakan kerugian dari basis data terdistribusi?",
          options: [
            "Peningkatan kinerja",
            "Pertumbuhan yang modular",
            "Kompleksitas dan kelemahan dalam keamanan",
            "Peningkatan ketersediaan data",
          ],
          answer: "Kompleksitas dan kelemahan dalam keamanan",
        },
        {
          id: 17,
          question:
            "Topologi jaringan distribusi data di mana jika salah satu node rusak, yang lainnya masih dapat berjalan, namun memiliki biaya yang mahal adalah...",
          options: [
            "Tree Structured network",
            "Ring network",
            "Fully Connected network",
            "Star network",
          ],
          answer: "Fully Connected network",
        },
        {
          id: 18,
          question:
            "Pada topologi Tree Structured Network, kerugian utamanya adalah...",
          options: [
            "Biaya yang sangat mahal",
            "Jika node pusat rusak, semua akan rusak",
            "Control management tidak terjamin",
            "Proses dimulai dari atas",
          ],
          answer: "Jika node pusat rusak, semua akan rusak",
        },
        {
          id: 19,
          question:
            "Proses pembagian database di mana database dipecah-pecah berdasarkan kolom dan baris untuk disimpan di site yang berbeda disebut...",
          options: ["Replikasi", "Normalisasi", "Fragmentasi", "Indeksasi"],
          answer: "Fragmentasi",
        },
        {
          id: 20,
          question:
            "Alasan diperlukannya fragmentasi data adalah untuk, kecuali...",
          options: [
            "Efisiensi, karena data disimpan dekat dengan pengguna",
            "Meningkatkan redundansi data",
            "Paralelisme, untuk meningkatkan konkurensi",
            "Keamanan, karena data yang tidak perlu tidak disimpan lokal",
          ],
          answer: "Meningkatkan redundansi data",
        },
        {
          id: 21,
          question:
            "Aturan fragmentasi yang menyatakan bahwa sebuah relasi asli harus dapat dibuat kembali dari fragmen-fragmennya disebut...",
          options: [
            "Kondisi lengkap (Completeness)",
            "Rekonstruksi (Reconstruction)",
            "Disjointness",
            "Otonomi",
          ],
          answer: "Rekonstruksi (Reconstruction)",
        },
        {
          id: 22,
          question:
            "Jenis fragmentasi yang memecah relasi menjadi beberapa sub-set tupel (baris) berdasarkan suatu predikat adalah...",
          options: [
            "Fragmentasi Vertikal",
            "Fragmentasi Horizontal",
            "Fragmentasi Campuran",
            "Fragmentasi Invers",
          ],
          answer: "Fragmentasi Horizontal",
        },
        {
          id: 23,
          question: "Fragmentasi vertikal membagi relasi berdasarkan...",
          options: [
            "Baris atau tupel",
            "Atribut atau kolom",
            "Kunci asing",
            "Kondisi `WHERE`",
          ],
          answer: "Atribut atau kolom",
        },
        {
          id: 24,
          question:
            "Untuk merekonstruksi relasi yang difragmentasi secara horizontal, digunakan operasi Aljabar Relasional...",
          options: [
            "Natural Join",
            "Union",
            "Intersection",
            "Cartesian Product",
          ],
          answer: "Union",
        },
        {
          id: 25,
          question:
            "Rekonstruksi relasi dari fragmentasi vertikal dilakukan dengan menggunakan operasi...",
          options: ["Union", "Difference", "Natural Join", "Selection"],
          answer: "Natural Join",
        },
        {
          id: 26,
          question:
            "Perangkat lunak bantu untuk perancangan basis data yang dioptimalkan untuk MySQL yang dibahas dalam dokumen adalah...",
          options: [
            "SQL Server Management Studio",
            "Oracle SQL Developer",
            "DBDesigner",
            "phpMyAdmin",
          ],
          answer: "DBDesigner",
        },
        {
          id: 27,
          question:
            "Masalah yang timbul jika dua transaksi mengakses item database yang sama yang mengakibatkan nilai dari database tersebut menjadi tidak benar disebut...",
          options: [
            "Uncommitted Update Problem",
            "Problem of Inconsistency Analysis",
            "Lost Update Problem",
            "Deadlock",
          ],
          answer: "Lost Update Problem",
        },
        {
          id: 28,
          question:
            "Ketika sebuah transaksi membaca suatu record yang sudah dimodifikasi oleh transaksi lain tetapi belum di-commit, dan transaksi tersebut kemudian di-rollback, masalah ini disebut...",
          options: [
            "Masalah Modifikasi Sementara (Uncommitted Update Problem)",
            "Masalah Kehilangan Modifikasi (Lost Update Problem)",
            "Masalah Analisa yang tidak konsisten",
            "Masalah Integritas",
          ],
          answer: "Masalah Modifikasi Sementara (Uncommitted Update Problem)",
        },
        {
          id: 29,
          question:
            "Mekanisme pengontrol konkurensi di mana sebuah transaksi memerlukan kunci untuk record agar tidak diubah oleh transaksi lain disebut...",
          options: ["Timestamping", "Locking", "Recovery", "Validation"],
          answer: "Locking",
        },
        {
          id: 30,
          question:
            "Jenis kunci (lock) yang memungkinkan pengguna membaca record tetapi tidak mengubahnya, dan pengguna lain juga dapat membacanya adalah...",
          options: [
            "Exclusive (X)",
            "Primary (P)",
            "Shared (S)",
            "Read-only (R)",
          ],
          answer: "Shared (S)",
        },
        {
          id: 31,
          question:
            "Jenis kunci (lock) yang memungkinkan pengguna untuk membaca dan mengubah record, sementara pengguna lain tidak diperbolehkan membaca ataupun mengubahnya adalah...",
          options: ["Shared (S)", "Exclusive (X)", "Write (W)", "Update (U)"],
          answer: "Exclusive (X)",
        },
        {
          id: 32,
          question:
            "Alternatif mekanisme kontrol konkurensi selain locking yang dapat menghilangkan masalah deadlock adalah...",
          options: ["Recovery", "Security", "Two-phase commit", "Timestamping"],
          answer: "Timestamping",
        },
        {
          id: 33,
          question:
            "Menurut klasifikasi failure berdasarkan jenis storage, `RAM` termasuk dalam kategori...",
          options: [
            "Volatile storage",
            "Non-volatile storage",
            "Stable storage",
            "Secondary storage",
          ],
          answer: "Volatile storage",
        },
        {
          id: 34,
          question:
            "Kegagalan fungsi perangkat keras yang menyebabkan hilangnya data pada volatile storage tetapi data pada non-volatile storage masih tetap ada disebut...",
          options: [
            "Logical Error",
            "System Error",
            "System Crash",
            "Disk Failure",
          ],
          answer: "System Crash",
        },
        {
          id: 35,
          question:
            "Proteksi data terhadap perusakan dan pemakaian oleh pengguna yang tidak mempunyai izin disebut...",
          options: ["Integrity", "Concurrency", "Recovery", "Security"],
          answer: "Security",
        },
        {
          id: 36,
          question:
            "Cara yang diberikan pada seorang pemakai untuk mendapatkan model database yang sesuai dengan kebutuhan perorangan, yang juga merupakan mekanisme keamanan, adalah konsep...",
          options: ["VIEW", "INDEX", "TRIGGER", "TABLE"],
          answer: "VIEW",
        },
        {
          id: 37,
          question:
            "Aturan integritas pada basis data relasional yang menyatakan bahwa tidak ada satu komponen kunci primer pun yang boleh bernilai kosong (null) adalah...",
          options: [
            "Integritas Referensi",
            "Integritas Domain",
            "Integritas Entity",
            "Integritas Kolom",
          ],
          answer: "Integritas Entity",
        },
        {
          id: 38,
          question:
            "Perintah `GRANT` dan `REVOKE` dalam SQL termasuk dalam kelompok...",
          options: [
            "Data Definition Language",
            "Data Manipulation Language",
            "Data Access",
            "Data Integrity",
          ],
          answer: "Data Access",
        },
        {
          id: 39,
          question:
            "Operator Aljabar Relasional `Set Difference (-)` berfungsi untuk...",
          options: [
            "Menggabungkan dua tabel",
            "Menghasilkan irisan dua tabel",
            "Mendapatkan tupel yang ada di satu relasi tapi tidak ada di relasi lainnya",
            "Menghasilkan perkalian kartesian",
          ],
          answer:
            "Mendapatkan tupel yang ada di satu relasi tapi tidak ada di relasi lainnya",
        },
        {
          id: 40,
          question:
            "Operator tambahan `NATURAL JOIN` adalah operasi yang menggabungkan...",
          options: [
            "Operasi selection dan projection",
            "Operasi selection dan cartesian product pada kolom yang sama",
            "Operasi union dan intersection",
            "Operasi division dan selection",
          ],
          answer:
            "Operasi selection dan cartesian product pada kolom yang sama",
        },
        {
          id: 41,
          question:
            "Dalam SQL, klausa yang digunakan setelah `GROUP BY` untuk menyaring hasil berdasarkan fungsi agregat adalah...",
          options: ["WHERE", "LIKE", "HAVING", "ORDER BY"],
          answer: "HAVING",
        },
        {
          id: 42,
          question:
            "Untuk mengurutkan hasil query SQL, klausa yang digunakan adalah...",
          options: ["SORT BY", "GROUP BY", "ARRANGE BY", "ORDER BY"],
          answer: "ORDER BY",
        },
        {
          id: 43,
          question:
            "Kata kunci subquery yang bernilai `TRUE` jika syarat dipenuhi oleh *semua* nilai yang dihasilkan subquery adalah...",
          options: ["ANY", "SOME", "ALL", "EXIST"],
          answer: "ALL",
        },
        {
          id: 44,
          question: "Pada topologi Star Network, keuntungan utamanya adalah...",
          options: [
            "Control management lebih terjamin karena bersifat sentral",
            "Jika satu node rusak, yang lain tetap berjalan",
            "Biaya implementasi yang rendah",
            "Reliability yang tinggi",
          ],
          answer: "Control management lebih terjamin karena bersifat sentral",
        },
        {
          id: 45,
          question: "Kerugian dari fragmentasi adalah...",
          options: [
            "Keamanan data meningkat",
            "Kinerja bisa menurun karena proses penggabungan kembali",
            "Efisiensi penggunaan data",
            "Meningkatkan paralelisme",
          ],
          answer: "Kinerja bisa menurun karena proses penggabungan kembali",
        },
        {
          id: 46,
          question:
            "Dalam merancang relasi menggunakan DBDesigner, untuk membuat hubungan *many-to-many* antara dua tabel, tool tersebut secara otomatis akan...",
          options: [
            "Menambahkan foreign key di kedua tabel",
            "Memunculkan tabel baru (tabel persimpangan)",
            "Hanya menghubungkan kedua tabel tanpa perubahan struktur",
            "Memberikan pesan error",
          ],
          answer: "Memunculkan tabel baru (tabel persimpangan)",
        },
        {
          id: 47,
          question: "Apa yang dimaksud dengan `Integritas Referensi`?",
          options: [
            "Tidak ada komponen kunci primer yang bernilai null",
            "Suatu domain dapat dipakai sebagai kunci primer jika merupakan atribut tunggal pada domain tersebut",
            "Semua data harus akurat dan valid",
            "Setiap foreign key harus merujuk ke primary key yang ada atau bernilai null",
          ],
          answer:
            "Setiap foreign key harus merujuk ke primary key yang ada atau bernilai null",
        },
        {
          id: 48,
          question: "`SELECT * FROM Mahasiswa;` adalah contoh perintah dari...",
          options: ["DDL", "DML", "DCL", "TCL"],
          answer: "DML",
        },
        {
          id: 49,
          question: "Operasi `REVOKE` digunakan untuk...",
          options: [
            "Memberikan hak akses kepada pengguna",
            "Menarik kembali hak akses yang telah diberikan",
            "Membuat pengguna baru",
            "Menghapus pengguna",
          ],
          answer: "Menarik kembali hak akses yang telah diberikan",
        },
        {
          id: 50,
          question:
            "Proses mengimpor data dari file lain ke dalam tabel database dapat dilakukan dengan perintah...",
          options: ["SELECT INTO OUTFILE", "EXPORT", "LOAD", "RECOVER TABLE"],
          answer: "LOAD",
        },
        // Soal 51-100
        {
          id: 51,
          question:
            "Manakah dari berikut ini yang merupakan operator tambahan (additional operasional) dalam Aljabar Relasional?",
          options: [
            "Restrict (σ)",
            "Project (π)",
            "Set Intersection (∩)",
            "Union (∪)",
          ],
          answer: "Set Intersection (∩)",
        },
        {
          id: 52,
          question:
            "Berdasarkan contoh tabel di dokumen, jika kita ingin menampilkan semua mahasiswa yang tinggal di 'DEPOK' dan berjenis kelamin 'LAKI-LAKI', ekspresi Aljabar Relasional yang tepat adalah...",
          options: [
            "σ Alamat='DEPOK' ∨ J_KEL='LAKI-LAKI' (MAHASISWA)",
            "σ Alamat='DEPOK' ∧ J_KEL='LAKI-LAKI' (MAHASISWA)",
            "π NAMA_MHS (σ Alamat='DEPOK' (MAHASISWA))",
            "σ Alamat='DEPOK' (MAHASISWA) - σ J_KEL='PEREMPUAN' (MAHASISWA)",
          ],
          answer: "σ Alamat='DEPOK' ∧ J_KEL='LAKI-LAKI' (MAHASISWA)",
        },
        {
          id: 53,
          question:
            "Operasi Aljabar Relasional yang digunakan untuk menggabungkan operasi cartesian product dengan operasi selection dengan suatu kriteria disebut...",
          options: ["Natural Join", "Theta Join", "Union", "Division"],
          answer: "Theta Join",
        },
        {
          id: 54,
          question: "Dalam SQL, perintah `DROP DATABASE` akan...",
          options: [
            "Menghapus tabel dari database",
            "Menghapus seluruh database beserta tabel di dalamnya",
            "Menghapus view dari database",
            "Menghapus indeks dari tabel",
          ],
          answer: "Menghapus seluruh database beserta tabel di dalamnya",
        },
        {
          id: 55,
          question:
            "Sintaks SQL untuk mengubah nama kolom `JKEL` menjadi `JENIS_KELAMIN` pada tabel Mahasiswa adalah...",
          options: [
            "ALTER TABLE Mahasiswa MODIFY JKEL JENIS_KELAMIN char(15);",
            "ALTER TABLE Mahasiswa DROP JKEL;",
            "ALTER TABLE Mahasiswa RENAME COLUMN JKEL TO JENIS_KELAMIN;",
            "ALTER TABLE Mahasiswa CHANGE COLUMN JKEL JENIS_KELAMIN char(15);",
          ],
          answer:
            "ALTER TABLE Mahasiswa CHANGE COLUMN JKEL JENIS_KELAMIN char(15);",
        },
        {
          id: 56,
          question:
            "Klausa `WITH CHECK OPTION` pada perintah `CREATE VIEW` berfungsi untuk...",
          options: [
            "Memastikan view dibuat dengan benar",
            "Memeriksa apakah data yang dimasukkan melalui view memenuhi kondisi view tersebut",
            "Mengecek duplikasi data pada view",
            "Memberikan opsi untuk menghapus view",
          ],
          answer:
            "Memeriksa apakah data yang dimasukkan melalui view memenuhi kondisi view tersebut",
        },
        {
          id: 57,
          question: "Fungsi `DISTINCT` dalam `SELECT` digunakan untuk...",
          options: [
            "Menampilkan semua data termasuk duplikat",
            "Mengurutkan data",
            "Menampilkan data yang unik (menghilangkan duplikat)",
            "Menghitung jumlah data",
          ],
          answer: "Menampilkan data yang unik (menghilangkan duplikat)",
        },
        {
          id: 58,
          question:
            "Berdasarkan contoh tabel Nilai, query `SELECT * FROM Nilai WHERE MID >= 70 AND FINAL >= 75;` akan menghasilkan berapa baris?",
          options: ["2 baris", "3 baris", "4 baris", "5 baris"],
          answer: "3 baris",
        },
        {
          id: 59,
          question:
            "`LEFT OUTER JOIN` sama dengan `LEFT JOIN`. Pernyataan ini...",
          options: [
            "Benar",
            "Salah",
            "Tergantung pada versi SQL",
            "Hanya benar untuk MySQL",
          ],
          answer: "Benar",
        },
        {
          id: 60,
          question:
            "Jika tabel `tb_kota` di-`RIGHT JOIN` dengan tabel `tb_provinsi` (seperti contoh di slide 47), baris mana dari `tb_provinsi` yang akan muncul meskipun tidak memiliki padanan di `tb_kota`?",
          options: ["DKI Jakarta", "Jawa Tengah", "Papua Barat", "Jawa Barat"],
          answer: "Papua Barat",
        },
        {
          id: 61,
          question:
            "Perintah `GRANT SELECT (FINAL) ON NILAI TO ADI;` memberikan hak akses kepada Adi untuk...",
          options: [
            "Hanya melihat kolom `FINAL` dari tabel `NILAI`",
            "Melihat semua kolom dari tabel `NILAI`",
            "Mengubah nilai pada kolom `FINAL`",
            "Menghapus data dari tabel `NILAI`",
          ],
          answer: "Hanya melihat kolom `FINAL` dari tabel `NILAI`",
        },
        {
          id: 62,
          question: "Perintah `RECOVER TABLE MHS;` termasuk dalam kategori...",
          options: [
            "Data Definition Language (DML)",
            "Data Access",
            "Auxiliary",
            "Data Integrity",
          ],
          answer: "Data Integrity",
        },
        {
          id: 63,
          question:
            "Perintah `RENAME TABLE MHS TO MAHASISWA;` berfungsi untuk...",
          options: [
            "Mengganti nama database",
            "Mengganti nama kolom",
            "Membuat alias untuk tabel",
            "Mengganti nama tabel",
          ],
          answer: "Mengganti nama tabel",
        },
        {
          id: 64,
          question: "`SELECT AVG(SKS) FROM MATAKULIAH;` akan menghitung...",
          options: [
            "Jumlah total SKS",
            "Rata-rata dari jumlah SKS",
            "Jumlah mata kuliah",
            "SKS minimum",
          ],
          answer: "Rata-rata dari jumlah SKS",
        },
        {
          id: 65,
          question: "Kata kunci subquery `EXIST` akan bernilai `TRUE` jika...",
          options: [
            "Subquery mengembalikan nilai `NULL`",
            "Terdapat sedikitnya satu baris di tabel hasil yang dikirim oleh subquery",
            "Semua baris dalam subquery memenuhi kondisi",
            "Subquery mengembalikan tabel kosong",
          ],
          answer:
            "Terdapat sedikitnya satu baris di tabel hasil yang dikirim oleh subquery",
        },
        {
          id: 66,
          question:
            "Dalam basis data terdistribusi, data pada masing-masing situs dapat menangani aplikasi lokal secara...",
          options: ["Terpusat", "Bergantung", "Otonom", "Terbatas"],
          answer: "Otonom",
        },
        {
          id: 67,
          question:
            "Topologi jaringan di mana setiap node terhubung ke node pusat, dan jika pusat rusak maka semua rusak, adalah...",
          options: [
            "Ring Network",
            "Tree Structured Network",
            "Star Network",
            "Fully Connected Network",
          ],
          answer: "Star Network",
        },
        {
          id: 68,
          question:
            "Keuntungan basis data terdistribusi di mana penambahan unit komputer baru dapat dilakukan dengan mudah disebut...",
          options: [
            "Peningkatan kinerja",
            "Otonomi lokal",
            "Pertumbuhan yang modular",
            "Ekonomis",
          ],
          answer: "Pertumbuhan yang modular",
        },
        {
          id: 69,
          question:
            "Aturan fragmentasi `Disjointness` untuk fragmentasi vertikal memiliki pengecualian untuk...",
          options: [
            "Atribut `foreign key`",
            "Atribut `primary key`",
            "Atribut dengan nilai `NULL`",
            "Semua atribut numerik",
          ],
          answer: "Atribut `primary key`",
        },
        {
          id: 70,
          question:
            "Fragmentasi yang didefinisikan menggunakan operasi `Selection (σ)` dan `Projection (π)` dari aljabar relasional adalah...",
          options: [
            "Fragmentasi Horizontal",
            "Fragmentasi Vertikal",
            "Fragmentasi Campuran",
            "Fragmentasi Relasional",
          ],
          answer: "Fragmentasi Campuran",
        },
        {
          id: 71,
          question:
            "Dalam contoh fragmentasi vertikal pada tabel `Staff`, mengapa atribut `staffNo` ada di kedua fragmen (`S1` dan `S2`)?",
          options: [
            "Karena `staffNo` adalah `foreign key`",
            "Untuk menjaga redundansi data",
            "Karena dibutuhkan untuk proses rekonstruksi (Join)",
            "Karena merupakan atribut yang paling sering diakses",
          ],
          answer: "Karena dibutuhkan untuk proses rekonstruksi (Join)",
        },
        {
          id: 72,
          question:
            "Dalam contoh fragmentasi campuran pada tabel `Staff`, operasi apa yang digunakan untuk merekonstruksi tabel `Staff` asli?",
          options: [
            "S1 ∪ (S21 ⋈ S22 ⋈ S23)",
            "S1 ⋈ (S21 ∪ S22 ∪ S23)",
            "(S1 ∪ S21) ⋈ (S22 ∪ S23)",
            "S1 ∪ S21 ∪ S22 ∪ S23",
          ],
          answer: "S1 ⋈ (S21 ∪ S22 ∪ S23)",
        },
        {
          id: 73,
          question:
            "Pada perancangan basis data menggunakan DBDesigner, relasi `1-n Non-Identifying-Relation` digunakan untuk membuat hubungan...",
          options: [
            "Satu-ke-satu (1-1)",
            "Satu-ke-banyak (1-M)",
            "Banyak-ke-banyak (M-M)",
            "Rekursif",
          ],
          answer: "Satu-ke-banyak (1-M)",
        },
        {
          id: 74,
          question:
            "Saat membuat relasi M-M di DBDesigner antara tabel `faktur` dan `barang`, tabel baru apa yang otomatis dibuat?",
          options: [
            "transaksi",
            "relasi_faktur_barang",
            "detail_faktur",
            "faktur_has_barang",
          ],
          answer: "faktur_has_barang",
        },
        {
          id: 75,
          question:
            "`Database Synchronization` di DBDesigner digunakan untuk...",
          options: [
            "Membuat backup database",
            "Mengimpor data dari file teks",
            "Mengekspor rancangan tabel ke server database (misalnya MySQL)",
            "Memeriksa integritas data",
          ],
          answer:
            "Mengekspor rancangan tabel ke server database (misalnya MySQL)",
        },
        {
          id: 76,
          question:
            "Masalah konkurensi di mana sebuah transaksi meringkas data sementara transaksi lain sedang memodifikasi sebagian dari data tersebut, sehingga menghasilkan ringkasan yang salah, disebut...",
          options: [
            "Lost Update Problem",
            "Uncommitted Update Problem",
            "Problem of Inconsistency Analysis",
            "Phantom Read Problem",
          ],
          answer: "Problem of Inconsistency Analysis",
        },
        {
          id: 77,
          question:
            "Jika transaksi A memegang kunci `Shared (S)` pada sebuah record, dan transaksi B meminta kunci `Exclusive (X)` pada record yang sama, apa yang akan terjadi pada transaksi B?",
          options: [
            "Transaksi B akan langsung mendapatkan kunci X",
            "Transaksi B akan menunggu hingga transaksi A melepaskan kunci S",
            "Transaksi A akan dibatalkan",
            "Akan terjadi `deadlock`",
          ],
          answer:
            "Transaksi B akan menunggu hingga transaksi A melepaskan kunci S",
        },
        {
          id: 78,
          question:
            "Jika transaksi A memegang kunci `Shared (S)` dan transaksi B meminta kunci `Shared (S)` pada record yang sama, apa yang terjadi?",
          options: [
            "Transaksi B harus menunggu",
            "Transaksi A dibatalkan",
            "Transaksi B akan langsung mendapatkan kunci S",
            "Terjadi error",
          ],
          answer: "Transaksi B akan langsung mendapatkan kunci S",
        },
        {
          id: 79,
          question:
            "`Timestamping` adalah mekanisme kontrol konkurensi yang mengatasi masalah...",
          options: ["Keamanan", "Integritas data", "Deadlock", "Recovery"],
          answer: "Deadlock",
        },
        {
          id: 80,
          question:
            "Informasi yang hilang jika terjadi kerusakan sistem (misalnya mati listrik) disimpan di...",
          options: [
            "Volatile storage",
            "Non-volatile storage",
            "Stable storage",
            "Offline storage",
          ],
          answer: "Volatile storage",
        },
        {
          id: 81,
          question:
            "Penyalahgunaan database yang tergolong 'disengaja' adalah...",
          options: [
            "Anomali karena pendistribusian data",
            "Kegagalan sistem",
            "`Insert`, `Delete`, & `Update` oleh pihak yang tidak berwenang",
            "Error pada aplikasi",
          ],
          answer:
            "`Insert`, `Delete`, & `Update` oleh pihak yang tidak berwenang",
        },
        {
          id: 82,
          question:
            "Tingkatan masalah keamanan yang berkaitan dengan pengamanan lokasi fisik database (misalnya ruang server) disebut...",
          options: ["Man", "Phisical", "Sistem Operasi", "Sistem Database"],
          answer: "Phisical",
        },
        {
          id: 83,
          question:
            "`Update Authorization` memberikan wewenang kepada pengguna untuk...",
          options: [
            "Menambah data baru",
            "Menghapus data",
            "Memodifikasi data yang sudah ada, tetapi tidak bisa menghapus",
            "Membuat relasi baru",
          ],
          answer:
            "Memodifikasi data yang sudah ada, tetapi tidak bisa menghapus",
        },
        {
          id: 84,
          question: "`Drop Authorization` memberikan wewenang untuk...",
          options: [
            "Menghapus atribut dari relasi",
            "Menghapus record dari relasi",
            "Menghapus relasi yang ada",
            "Menghapus indeks",
          ],
          answer: "Menghapus relasi yang ada",
        },
        {
          id: 85,
          question:
            "Memeriksa keakuratan dan validasi data dalam database adalah definisi dari...",
          options: ["Security", "Concurrency", "Recovery", "Integrity"],
          answer: "Integrity",
        },
        {
          id: 86,
          question:
            "Ekspresi Aljabar Relasional `π` nama_dos,gaji (DOSEN) akan menghasilkan...",
          options: [
            "Semua data dari tabel DOSEN",
            "Hanya kolom nama dosen dan gaji dari tabel DOSEN",
            "Dosen yang gajinya di atas nilai tertentu",
            "Jumlah dosen",
          ],
          answer: "Hanya kolom nama dosen dan gaji dari tabel DOSEN",
        },
        {
          id: 87,
          question:
            "Perintah SQL `ALTER TABLE Mahasiswa ADD JKEL char(1);` akan...",
          options: [
            "Menambah record baru ke tabel Mahasiswa",
            "Menambah kolom baru bernama JKEL ke tabel Mahasiswa",
            "Mengubah nama tabel menjadi Mahasiswa",
            "Menghapus kolom JKEL",
          ],
          answer: "Menambah kolom baru bernama JKEL ke tabel Mahasiswa",
        },
        {
          id: 88,
          question:
            "Apa hasil dari query: `SELECT MIN(FINAL) FROM Nilai;` berdasarkan tabel contoh?",
          options: ["0", "40", "55", "60"],
          answer: "0",
        },
        {
          id: 89,
          question:
            "Subquery `SELECT NIM FROM MAHASISWA WHERE NAMA='Astuti'` akan menghasilkan...",
          options: [
            "Nama dan NIM Astuti",
            "Semua data Astuti",
            "Hanya NIM Astuti",
            "`True` atau `False`",
          ],
          answer: "Hanya NIM Astuti",
        },
        {
          id: 90,
          question:
            "Karakteristik database terdistribusi di mana setiap DBMS berpartisipasi dalam sedikitnya satu aplikasi global berarti...",
          options: [
            "Setiap situs bekerja sendiri-sendiri",
            "Ada kerjasama antar DBMS untuk tugas yang lebih besar",
            "Semua aplikasi harus bersifat lokal",
            "DBMS tidak bisa berkomunikasi",
          ],
          answer: "Ada kerjasama antar DBMS untuk tugas yang lebih besar",
        },
        {
          id: 91,
          question: "Dalam topologi `Ring Network`, kerugiannya adalah...",
          options: [
            "Jika pusat rusak, semua rusak",
            "Biaya sangat mahal",
            "Control management kurang terjamin karena bersifat desentralisasi",
            "Reliability rendah",
          ],
          answer:
            "Control management kurang terjamin karena bersifat desentralisasi",
        },
        {
          id: 92,
          question:
            "Untuk merekonstruksi relasi dari fragmentasi campuran, operasi apa yang umumnya terlibat?",
          options: [
            "Hanya `Join`",
            "Hanya `Union`",
            "`Join` dan `Union`",
            "`Intersection` dan `Difference`",
          ],
          answer: "`Join` dan `Union`",
        },
        {
          id: 93,
          question:
            "`Uncommitted Update Problem` juga dikenal sebagai masalah...",
          options: [
            "`Dirty Read`",
            "`Lost Update`",
            "`Inconsistent Read`",
            "`Phantom Read`",
          ],
          answer: "`Dirty Read`",
        },
        {
          id: 94,
          question:
            "Kegagalan sistem di mana program tidak dapat dilanjutkan karena keadaan yang tidak diinginkan seperti `deadlock` disebut...",
          options: [
            "Logical Error",
            "System Error",
            "System Crash",
            "Disk Failure",
          ],
          answer: "System Error",
        },
        {
          id: 95,
          question: "Integritas Referensi memastikan bahwa...",
          options: [
            "Nilai `foreign key` harus cocok dengan nilai `primary key` yang ada di tabel lain, atau bernilai `NULL`.",
            "Nilai `primary key` tidak boleh `NULL`.",
            "Semua data dalam satu kolom harus dari tipe data yang sama.",
            "Tidak ada record duplikat dalam satu tabel.",
          ],
          answer:
            "Nilai `foreign key` harus cocok dengan nilai `primary key` yang ada di tabel lain, atau bernilai `NULL`.",
        },
        {
          id: 96,
          question:
            "Dalam SQL, `SELECT * FROM Mahasiswa, Nilai;` tanpa klausa `WHERE` atau `JOIN` akan menghasilkan...",
          options: [
            "Gabungan (`UNION`) dari kedua tabel",
            "Irisan (`INTERSECT`) dari kedua tabel",
            "`INNER JOIN` otomatis",
            "`Cartesian Product` (produk silang)",
          ],
          answer: "`Cartesian Product` (produk silang)",
        },
        {
          id: 97,
          question: "Apa fungsi dari klausa `GROUP BY` dalam SQL?",
          options: [
            "Mengurutkan hasil query",
            "Mengelompokkan baris yang memiliki nilai yang sama dalam kolom tertentu ke dalam baris ringkasan",
            "Menyaring record berdasarkan kondisi tertentu",
            "Menggabungkan hasil dari dua atau lebih `SELECT` statement",
          ],
          answer:
            "Mengelompokkan baris yang memiliki nilai yang sama dalam kolom tertentu ke dalam baris ringkasan",
        },
        {
          id: 98,
          question:
            "Dalam Aljabar Relasional, jika relasi R memiliki 5 atribut dan relasi S memiliki 3 atribut, berapa banyak atribut yang akan dimiliki oleh hasil dari `R X S` (Cartesian Product)?",
          options: ["3", "5", "8", "15"],
          answer: "8",
        },
        {
          id: 99,
          question:
            "Manakah dari berikut ini yang BUKAN merupakan fungsi agregat standar di SQL?",
          options: ["SUM", "AVG", "MEDIAN", "MAX"],
          answer: "MEDIAN",
        },
        {
          id: 100,
          question: "Perintah `LOAD DATA INFILE` digunakan untuk...",
          options: [
            "Mengekspor data ke file eksternal",
            "Mengimpor data dari file eksternal ke dalam tabel",
            "Memuat ulang tabel setelah crash",
            "Membuat salinan tabel",
          ],
          answer: "Mengimpor data dari file eksternal ke dalam tabel",
        },
      ];

      // --- Variabel dan Elemen DOM ---
      let currentQuestionIndex = 0;
      let score = 0;
      let selectedPacketQuestions = [];
      let userAnswers = [];
      let selectedAnswer = null;
      let timerInterval = null;

      const screens = {
        start: document.getElementById("start-screen"),
        packetSelection: document.getElementById("packet-selection-screen"),
        quiz: document.getElementById("quiz-screen"),
        result: document.getElementById("result-screen"),
        review: document.getElementById("review-screen"),
      };

      const modal = {
        overlay: document.getElementById("confirmation-modal"),
        title: document.getElementById("modal-title"),
        text: document.getElementById("modal-text"),
        confirmButton: document.getElementById("modal-confirm-button"),
        cancelButton: document.getElementById("modal-cancel-button"),
      };

      const startButton = document.getElementById("start-button");
      const packetButtons = document.querySelectorAll(".packet-button");
      const nextButton = document.getElementById("next-button");
      const restartButton = document.getElementById("restart-button");
      const reviewButton = document.getElementById("review-button");
      const backToResultButton = document.getElementById(
        "back-to-result-button"
      );
      const backToStartButton = document.getElementById("back-to-start-button");
      const quizBackButton = document.getElementById("quiz-back-button");

      const questionCounter = document.getElementById("question-counter");
      const timerDisplay = document.getElementById("timer");
      const progressBar = document.getElementById("progress-bar");
      const questionText = document.getElementById("question-text");
      const optionsContainer = document.getElementById("options-container");

      const scoreText = document.getElementById("score-text");
      const scoreBar = document.getElementById("score-bar");
      const feedbackContainer = document.getElementById("feedback-container");
      const reviewContainer = document.getElementById("review-container");

      // --- Fungsi-Fungsi Aplikasi ---

      function showScreen(screenId) {
        Object.values(screens).forEach((screen) =>
          screen.classList.remove("active")
        );
        screens[screenId].classList.add("active");
      }

      function showConfirmationModal(title, text, onConfirm) {
        modal.title.innerText = title;
        modal.text.innerText = text;
        modal.overlay.classList.add("active");

        modal.confirmButton.onclick = () => {
          modal.overlay.classList.remove("active");
          onConfirm();
        };
        modal.cancelButton.onclick = () => {
          modal.overlay.classList.remove("active");
        };
      }

      function selectPacket(packetType) {
        let duration = 0;
        let packetName = "";

        if (packetType === "1") {
          selectedPacketQuestions = quizQuestions.slice(0, 50);
          duration = 60 * 60; // 60 menit
          packetName = "Paket 1";
        } else if (packetType === "2") {
          selectedPacketQuestions = quizQuestions.slice(50, 100);
          duration = 60 * 60; // 60 menit
          packetName = "Paket 2";
        } else {
          // 'all'
          selectedPacketQuestions = [...quizQuestions].sort(
            () => Math.random() - 0.5
          );
          duration = 120 * 60; // 120 menit
          packetName = "Semua Soal";
        }

        showConfirmationModal(
          `Mulai ${packetName}?`,
          `Anda akan memiliki waktu ${
            duration / 60
          } menit untuk menyelesaikan kuis ini. Apakah Anda siap?`,
          () => startQuiz(duration)
        );
      }

      function startQuiz(duration) {
        showScreen("quiz");
        currentQuestionIndex = 0;
        score = 0;
        userAnswers = [];
        selectedAnswer = null;
        startTimer(duration);
        loadQuestion();
      }

      function startTimer(duration) {
        let timeLeft = duration;
        clearInterval(timerInterval);
        timerInterval = setInterval(() => {
          const minutes = Math.floor(timeLeft / 60);
          let seconds = timeLeft % 60;
          seconds = seconds < 10 ? "0" + seconds : seconds;

          timerDisplay.innerText = `${minutes}:${seconds}`;

          if (--timeLeft < 0) {
            clearInterval(timerInterval);
            showResult(); // Waktu habis
          }
        }, 1000);
      }

      function loadQuestion() {
        selectedAnswer = null;
        nextButton.disabled = true;

        const currentQuestion = selectedPacketQuestions[currentQuestionIndex];
        const totalQuestions = selectedPacketQuestions.length;

        questionCounter.innerText = `Soal ${
          currentQuestionIndex + 1
        } dari ${totalQuestions}`;
        const progressPercentage =
          ((currentQuestionIndex + 1) / totalQuestions) * 100;
        progressBar.style.width = `${progressPercentage}%`;

        questionText.innerText = currentQuestion.question;

        optionsContainer.innerHTML = "";
        currentQuestion.options.forEach((option, index) => {
          const button = document.createElement("button");
          button.innerHTML = `<span class="font-semibold">${String.fromCharCode(
            65 + index
          )}.</span> ${option}`;
          button.className =
            "p-4 rounded-lg text-left w-full transition-all duration-200 border-2 bg-slate-700 border-slate-600 hover:bg-slate-600 hover:border-slate-500";
          button.onclick = () => handleAnswerSelect(option, button);
          optionsContainer.appendChild(button);
        });

        // Disable tombol kembali jika di soal pertama
        quizBackButton.disabled = currentQuestionIndex === 0;
      }

      function handleAnswerSelect(option, buttonElement) {
        selectedAnswer = option;
        nextButton.disabled = false;
        Array.from(optionsContainer.children).forEach((btn) => {
          btn.className =
            "p-4 rounded-lg text-left w-full transition-all duration-200 border-2 bg-slate-700 border-slate-600 hover:bg-slate-600 hover:border-slate-500";
        });
        buttonElement.className =
          "p-4 rounded-lg text-left w-full transition-all duration-200 border-2 bg-sky-500 border-sky-400 scale-105 shadow-lg";
      }

      function handleNextQuestion() {
        userAnswers.push(selectedAnswer);
        if (
          selectedAnswer ===
          selectedPacketQuestions[currentQuestionIndex].answer
        ) {
          score++;
        }

        if (currentQuestionIndex < selectedPacketQuestions.length - 1) {
          currentQuestionIndex++;
          loadQuestion();
        } else {
          clearInterval(timerInterval);
          showResult();
        }
      }

      function showResult() {
        showScreen("result");
        const totalQuestions = selectedPacketQuestions.length;
        const percentage = Math.round((score / totalQuestions) * 100);
        let feedback = {
          text: "Perlu Belajar Lagi",
          color: "text-red-400",
          icon: `<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-8 h-8"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v2.25m0 4.5h.008v.008H12v-.008zm0-9a9 9 0 100 18 9 9 0 000-18z" /></svg>`,
        };

        if (percentage >= 90) {
          feedback = {
            text: "Luar Biasa!",
            color: "text-green-400",
            icon: `<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-8 h-8"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75" /><circle cx="12" cy="12" r="9" /></svg>`,
          };
        } else if (percentage >= 70) {
          feedback = {
            text: "Bagus!",
            color: "text-yellow-400",
            icon: `<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-8 h-8"><path stroke-linecap="round" stroke-linejoin="round" d="M12 17.25c2.485 0 4.5-2.015 4.5-4.5s-2.015-4.5-4.5-4.5-4.5 2.015-4.5 4.5 2.015 4.5 4.5 4.5z" /><circle cx="12" cy="12" r="9" /></svg>`,
          };
        }

        feedbackContainer.innerHTML = `${feedback.icon} <span>${feedback.text}</span>`;
        feedbackContainer.className = `flex items-center justify-center gap-2 text-2xl font-bold mb-4 ${feedback.color}`;

        scoreText.innerHTML = `Anda berhasil menjawab <span class="text-sky-400 font-bold text-2xl">${score}</span> dari <span class="font-bold text-2xl">${totalQuestions}</span> soal.`;
        scoreBar.style.width = `${percentage}%`;
        scoreBar.innerText = `${percentage}%`;
      }

      function showReview() {
        showScreen("review");
        reviewContainer.innerHTML = "";
        selectedPacketQuestions.forEach((question, index) => {
          const userAnswer = userAnswers[index];
          const isCorrect = userAnswer === question.answer;

          const reviewItem = document.createElement("div");
          reviewItem.className = `p-4 rounded-lg border-l-4 ${
            isCorrect
              ? "border-green-500 bg-slate-700/50"
              : "border-red-500 bg-slate-700/50"
          }`;

          const icon = isCorrect
            ? `<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-green-400 inline-block mr-2" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l6 6 9-13.5" /></svg>`
            : `<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-red-400 inline-block mr-2" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" /></svg>`;

          reviewItem.innerHTML = `
                    <p class="font-bold text-lg mb-2">Soal ${question.id}: ${
            question.question
          }</p>
                    <p class="text-sm ${
                      isCorrect ? "text-green-400" : "text-red-400"
                    }">${icon}Jawaban Anda: <span class="font-semibold">${
            userAnswer || "Tidak dijawab"
          }</span></p>
                    ${
                      !isCorrect
                        ? `<p class="text-sm text-sky-400 mt-1"><span class="font-bold">Jawaban Benar:</span> ${question.answer}</p>`
                        : ""
                    }
                `;
          reviewContainer.appendChild(reviewItem);
        });
      }

      // --- Event Listeners ---
      startButton.addEventListener("click", () =>
        showScreen("packetSelection")
      );
      backToStartButton.addEventListener("click", () => showScreen("start"));

      packetButtons.forEach((button) => {
        button.addEventListener("click", (e) => {
          const packet = e.currentTarget.getAttribute("data-packet");
          selectPacket(packet);
        });
      });

      nextButton.addEventListener("click", handleNextQuestion);
      restartButton.addEventListener("click", () => {
        showConfirmationModal(
          "Ulangi Latihan?",
          "Anda akan kembali ke halaman pemilihan paket. Progres saat ini akan hilang.",
          () => showScreen("packetSelection")
        );
      });
      reviewButton.addEventListener("click", showReview);
      backToResultButton.addEventListener("click", () => showScreen("result"));
      quizBackButton.addEventListener("click", () => {
        if (currentQuestionIndex > 0) {
          currentQuestionIndex--;
          // Hapus jawaban terakhir jika user sudah memilih
          userAnswers.pop();
          loadQuestion();
        } else {
          // Optional: Bisa beri feedback jika sudah di soal pertama
          // Misal: alert("Sudah di soal pertama.");
        }
      });

      // Initial call
      showScreen("start");
    </script>
  </body>
</html>
